var addBtn=$("#add-btn"),loadData=window.base_url+"umd/load_data",tableID=$("#datatable_ajax"),grid=new Datatable,filterData,urlUpdateStatus=window.base_url+"umd/update_status",cancelConfirm=!0,Page=function(){return{init:function(){Page.main(),Helper.datePicker()},main:function(){addBtn.click(function(){Page.add()}),Helper.tableAjax(grid,tableID,loadData,urlUpdateStatus,cancelConfirm),$(document).on("click",".btn-detail",function(){var e=$(this).data("id");Page.detail(e)}),$(document).on("click",".btn-pricelist",function(){var e=$(this).data("id");Page.pricelist(e)}),$(document).on("submit","#form-pricelist",function(){var e=$(this).find(".submit").val(),t="pricelist";return Page.submitForm($("#form-pricelist"),e,t),!1})},detail:function(e){var t=Helper.loadModal("lg"),a=t.find(".modal-body"),l=t.find(".modal-title");l.text("Detail Unit/Kendaraan"),Helper.blockElement($(a)),Helper.ajax(Helper.baseUrl("umd/load_detail"),"get","html",{id:e}).error(function(e){t.find(".close").click()}).done(function(e){a.html(e),Helper.unblockElement($(a))})},update:function(e){var t=Helper.loadModal("lg"),a=t.find(".modal-body"),l=t.find(".modal-title");l.text("Update Status Unit/ Kendaraan"),Helper.blockElement($(a)),Helper.ajax(Helper.baseUrl("umd/load_update_form"),"get","html",{id:e}).error(function(e){t.find(".close").click()}).done(function(e){a.html(e),Helper.unblockElement($(a))})},pricelist:function(e){var t=Helper.loadModal("lg"),a=t.find(".modal-body"),l=t.find(".modal-title");l.text("Form Harga Sewa Unit"),Helper.blockElement($(a)),Helper.ajax(Helper.baseUrl("umd/load_pricelist_form"),"get","html",{id:e}).error(function(e){t.find(".close").click()}).done(function(e){a.html(e),Helper.unblockElement($(a))})},submitForm:function(e,t,a){var l=e.find(".submit");if(Helper.validateForm(e,{harga_sewa:{required:!0}}),e.valid()){var n=Helper.baseUrl("umd/add");t&&"pricelist"==a&&(n=Helper.baseUrl("umd/pricelist")),Helper.blockElement(e.parent()),l.attr("disabled",!0),Helper.ajax(n,"post","json",Helper.serializeForm(e)).error(function(t){Helper.unblockElement(e.parent()),l.attr("disabled",!1)}).done(function(t){t.status?(e.parent().parent().find(".close").click(),swal(t.action,t.message,"success"),grid.getDataTable(tableID).ajax.reload()):(l.attr("disabled",!1),Helper.unblockElement(e.parent()),swal({title:t.action,text:t.message,type:"error",html:!0}))})}}}}();