var addBtn=$("#add-btn"),loadData=window.base_url+"groups/load_data",tableID=$("#datatable_ajax"),grid=new Datatable,Page=function(){return{init:function(){Page.main()},main:function(){addBtn.click(function(){Page.add()}),Helper.tableAjax(grid,tableID,loadData,null,null),$(document).on("submit","#form-create",function(){return Page.submitForm($("#form-create"),null),!1}),$(document).on("click",".btn-edit",function(){var e=$(this).data("id");Page.edit(e)}),$(document).on("submit","#form-edit",function(){var e=$(this).find(".submit").val();return Page.submitForm($("#form-edit"),e),!1})},add:function(e){var t=Helper.loadModal("lg"),a=t.find(".modal-body"),l=t.find(".modal-title");l.text("Add Group"),Helper.blockElement($(a)),Helper.ajax(Helper.baseUrl("groups/loadAddForm"),"get","html").error(function(e){t.find(".close").click()}).done(function(e){Helper.unblockElement($(a)),a.html(e)})},edit:function(e){var t=Helper.loadModal("lg"),a=t.find(".modal-body"),l=t.find(".modal-title");l.text("Edit Group"),Helper.blockElement($(a)),Helper.ajax(Helper.baseUrl("groups/loadEditForm"),"get","html",{id:e}).error(function(e){t.find(".close").click()}).done(function(e){a.html(e),Helper.unblockElement($(a))})},submitForm:function(e,t){var a=e.find(".submit");if(Helper.validateForm(e,{name:{required:!0},description:{required:!0}}),e.valid()){var l=Helper.baseUrl("groups/insert");t&&(l=Helper.baseUrl("groups/update")),Helper.blockElement(e.parent()),a.attr("disabled",!0),Helper.ajax(l,"post","json",Helper.serializeForm(e)).error(function(t){Helper.unblockElement(e.parent()),a.attr("disabled",!1)}).done(function(t){t.status?(e.parent().parent().find(".close").click(),swal(t.action,t.message,"success"),grid.getDataTable(tableID).ajax.reload()):(a.attr("disabled",!1),Helper.unblockElement(e.parent()),swal({title:t.action,text:t.message,type:"error",html:!0}))})}}}}();